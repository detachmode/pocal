<UserControl x:Class="Pocal.SDV_Control"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:pocal="clr-namespace:Pocal"
    mc:Ignorable="d"
    xmlns:viewmodel="clr-namespace:Pocal.ViewModel"
    FontFamily="{StaticResource PhoneFontFamilyNormal}"
    FontSize="{StaticResource PhoneFontSizeNormal}"
    Foreground="{StaticResource PhoneForegroundBrush}"
    d:DesignHeight="500" d:DesignWidth="480"
    d:DataContext="{d:DesignInstance IsDesignTimeCreatable=True, Type=viewmodel:MainViewModel}"
    >

    <Grid x:Name="LayoutRoot">
        <!--******** ******** ******** -->
        <!--******** SDV BODY ******** -->
        <!--******** ********** ******** -->
        <Border x:Name="SingleDayHeader" Canvas.ZIndex="3"  Margin="0,-41,0,0" Height="41" VerticalAlignment="Top" BorderThickness="0,1,0,1" BorderBrush="#FF5D5D5D" >
            <Border.Background>
                <SolidColorBrush Color="{StaticResource PhoneAccentColor}"/>
            </Border.Background>
            <TextBlock  x:Name="SingleDayWindowHeader" 
						Foreground="White"
						Style="{StaticResource PhoneTextTitle3Style}"
						Text="{Binding SingleDayViewModel.TappedDay.DT, Converter={StaticResource windowHeaderDateConverter}}" 
						Margin="148,-4,24,0" 
						FontSize="26" VerticalAlignment="Center" 
						HorizontalAlignment="Right">
						<!--<TextBlock.Foreground>
                			<SolidColorBrush Color="{StaticResource PhoneButtonBasePressedForegroundColor}"/>
                        </TextBlock.Foreground>-->
            </TextBlock>
        </Border>
        <ScrollViewer x:Name="SingleDayScrollViewer"  VerticalScrollBarVisibility="Hidden" ManipulationCompleted="SingleDayScrollViewer_ManipulationCompleted">
            <Grid>
                <Grid.Background>
                    <SolidColorBrush Color="{StaticResource Color90Black}"/>
                </Grid.Background>
                <StackPanel>
                    <ItemsControl  x:Name="AllDayAppointments" Margin="24,0,0,0" ItemsSource="{Binding SingleDayViewModel.TappedDay.PocalApptsOfDay}">
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <pocal:SDV_AllDay_Control/>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                    <Border Height="1" Background="#FF807C7C"/>
                    <Grid x:Name="HourLinesGridAppointments">
                        <ItemsControl x:Name="hourlines"
									ScrollViewer.VerticalScrollBarVisibility="Disabled"
									ItemsSource="{Binding SingleDayViewModel.hourLines, Mode=OneWay}" >
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <pocal:SDV_HourLine_Control/>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>
                        <ItemsControl x:Name="AppointmentsOnGrid"  ScrollViewer.VerticalScrollBarVisibility="Disabled"   
                                      ItemsSource="{Binding SingleDayViewModel.TappedDay.PocalApptsOfDay, Mode=OneWay}" >
                            <!--unnötig? NEIN! Sonst fängt die YPos nicht für jedes Element bei Null an. ItemsPanel ist standardmässig ein Stackpanel-->
                            <ItemsControl.ItemsPanel>
                                <ItemsPanelTemplate>
                                    <Grid VerticalAlignment="Top">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>
                                    </Grid>
                                </ItemsPanelTemplate>
                            </ItemsControl.ItemsPanel>
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <pocal:SDV_Appointment_Control/>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>
                        <Grid IsHitTestVisible="False">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="15*"/>
                                <ColumnDefinition Width="82*"/>
                            </Grid.ColumnDefinitions>
                            <Border Grid.Column="0" BorderThickness="0,0,2,0">
                                <Border.BorderBrush>
                                    <SolidColorBrush Color="{StaticResource ColorBorderGrey}"/>
                                </Border.BorderBrush>
                            </Border>
                        </Grid>
                    </Grid>
                    <Border Height="1" Background="#FF807C7C"/>
                </StackPanel>
            </Grid>
        </ScrollViewer>
    </Grid>
</UserControl>